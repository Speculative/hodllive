<!DOCTYPE html>
<html>
  <head>
    <title>Hololive Viewership Stats</title>
    <meta charset="utf-8" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://unpkg.com/vue@2.6.12/dist/vue.min.js"
    ></script>
    <script src="https://unpkg.com/vue-chartjs@3.5.1/dist/vue-chartjs.min.js"></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/element-ui@2.13.2/lib/theme-chalk/index.css"
    />
    <script
      type="text/javascript"
      src="https://unpkg.com/element-ui@2.13.2/lib/index.js"
    ></script>
    <script src="https://unpkg.com/element-ui@2.13.2/lib/umd/locale/en.js"></script>
    <link href="./styles.css" rel="stylesheet" />
  </head>
  <body>
    <section id="chart-all">
      <el-menu
        id="nav"
        :default-active="activeTab"
        :collapse="true"
        v-on:select="setActiveTab"
      >
        <div id="config-button-wrapper">
          <el-tooltip
            effect="dark"
            content="Data Configuration"
            placement="right"
          >
            <el-button
              id="chart-sidebar-open"
              type="default"
              icon="el-icon-setting"
              circle
            ></el-button>
          </el-tooltip>
        </div>
        <el-menu-item index="value">
          <i class="el-icon-data-line"></i>
          <span slot="title">Value vs. Date</span>
        </el-menu-item>
        <el-menu-item index="rank">
          <i class="el-icon-trophy"></i>
          <span slot="title">Rank vs. Date</span>
        </el-menu-item>
      </el-menu>
      <section id="chart-config">
        <el-button
          id="chart-sidebar-close"
          type="default"
          icon="el-icon-close"
          circle
        ></el-button>
        <form class="select-data">
          <fieldset>
            <legend>Data</legend>
            <el-radio v-model="dimension" label="subs">Subscribers</el-radio>
            <el-radio v-model="dimension" label="views">Views</el-radio>
          </fieldset>
          <fieldset>
            <legend>Members</legend>
            <el-row type="flex" class="member-search">
              <el-col :span="16">
                <el-input
                  placeholder="Member name"
                  prefix-icon="el-icon-search"
                  v-model="memberSearch"
                  v-on:change="completeMemberSearch"
                >
                </el-input>
              </el-col>
              <el-col :span="8">
                <el-button-group>
                  <el-dropdown @command="selectMemberPreset">
                    <el-button type="default" icon="el-icon-arrow-down">
                    </el-button>
                    <el-dropdown-menu slot="dropdown">
                      <el-dropdown-item command="daily-top-5"
                        >Top 5 Today</el-dropdown-item
                      >
                      <el-dropdown-item command="daily-top-10"
                        >Top 10 Today</el-dropdown-item
                      >
                    </el-dropdown-menu>
                  </el-dropdown>
                  <el-tooltip
                    id="clear-all-members"
                    effect="dark"
                    content="Clear selection"
                    placement="right"
                  >
                    <el-button
                      type="default"
                      icon="el-icon-delete"
                      @click="clearSelectedMembers"
                    ></el-button>
                  </el-tooltip>
                </el-button-group>
              </el-col>
            </el-row>
            <el-tree
              show-checkbox
              node-key="id"
              ref="memberSelect"
              check-on-click-node
              :render-after-expand="false"
              :expand-on-click-node="false"
              :default-checked-keys="selectedMembers"
              :data="constants.generationTree"
              v-on:check-change="setMemberCheck"
            ></el-tree>
          </fieldset>
          <fieldset>
            <legend>Date Range</legend>
            <el-date-picker
              v-model="selectedDateRange"
              type="daterange"
              start-placeholder="Start Date"
              end-placeholder="End Date"
              :clearable="false"
              :picker-options="selectDateRangeOptions"
            ></el-date-picker>
          </fieldset>
        </form>
      </section>
      <value-chart
        id="value-chart"
        class="chart-container"
        v-if="viewershipStats.byMember !== null && activeTab === 'value'"
        :options="constants.valueChartOptions"
        :chart-data="valueChartData"
      ></value-chart>
      <rank-chart
        id="rank-chart"
        class="chart-container"
        v-else-if="viewershipStats.byDate !== null && activeTab === 'rank'"
        :options="constants.rankChartOptions"
        :chart-data="rankChartData"
      ></rank-chart>
    </section>
    <script type="module" src="./hodllive.js"></script>
  </body>
</html>
